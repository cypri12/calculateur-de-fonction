<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de fonction</title>
    <style>
        /* Votre style existant */
    </style>
    <!-- Importation de Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1>Calculateur de fonction</h1>
        <label for="x">Entrez la valeur de x :</label>
        <input type="number" id="x" step="any" placeholder="Entrez une valeur pour x">

        <label for="operation">Opération à effectuer :</label>
        <input type="text" id="operation" placeholder="Exemple : 4/x, 2*x, x+10">

        <button onclick="calculate()">Calculer</button>

        <p id="result"></p>
        <!-- Canvas pour le graphique -->
        <canvas id="chart" width="400" height="400"></canvas>
    </div>

    <div class="small-footer-text">Adieu ct'equipe</div>

    <script>
        function calculate() {
            let x = parseFloat(document.getElementById("x").value);
            let operation = document.getElementById("operation").value;

            try {
                // Calculer une valeur unique pour x
                let result = eval(operation.replace(/x/g, x));
                document.getElementById("result").innerText = `Le résultat de l'opération ${operation} est : ${result}`;

                // Générer des données pour le graphique
                let xValues = Array.from({length: 100}, (_, i) => i - 50); // x de -50 à 50
                let yValues = xValues.map(val => eval(operation.replace(/x/g, val)));

                // Tracer le graphique
                drawChart(xValues, yValues);
            } catch (error) {
                if (error instanceof SyntaxError) {
                    document.getElementById("result").innerText = "Erreur : opération non valide.";
                } else {
                    document.getElementById("result").innerText = "Erreur inconnue.";
                }
            }
        }

        function drawChart(xValues, yValues) {
            const ctx = document.getElementById('chart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: xValues,
                    datasets: [{
                        label: 'y en fonction de x',
                        data: yValues,
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 2,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: { title: { display: true, text: 'x' } },
                        y: { title: { display: true, text: 'y' } }
                    }
                }
            });
        }
    </script>
</body>
</html>
